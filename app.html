<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Health Monitor Dashboard</title>
  <style>
    body {
      background-color: #0a0a12;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #e0e0e0;
      padding: 20px;
      margin: 0;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: #7df9ff;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(4, 1fr);
      gap: 20px;
      max-width: 1200px;
      margin: 0 auto;
      min-height: 600px;
    }

    .card {
      background-color: #12121a;
      border-radius: 16px;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: all 0.3s ease-in-out;
      border: 1px solid #1a1a2e;
    }

    .card:hover {
      transform: scale(1.03);
      box-shadow: 0 0 20px rgba(125, 249, 255, 0.2);
    }

    .metric-title {
      font-size: 1rem;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .metric-value {
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .status {
      background-color: #1e2f26;
      color: #59fba6;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      display: inline-block;
      margin-bottom: 6px;
      text-align: center;
    }

    .status.warning {
      background-color: #3d2a1e;
      color: #ffb347;
    }

    .status.critical {
      background-color: #3d1e1e;
      color: #ff6b6b;
    }

    .footer {
      font-size: 0.75rem;
      color: #999;
    }

    .health-status {
      grid-column: 3;
      grid-row: 4;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      border: 2px solid #7df9ff;
    }

    .health-status .metric-value {
      font-size: 1.5rem;
      text-align: center;
      color: #7df9ff;
    }

    .checklist {
      text-align: center;
      margin-top: 40px;
      padding-top: 30px;
      border-top: 1px solid #333;
    }

    .checklist h2 {
      color: #7df9ff;
      margin-bottom: 10px;
    }

    .checklist label {
      margin: 0 15px;
      font-size: 1rem;
      cursor: pointer;
    }

    .checklist input[type="checkbox"] {
      transform: scale(1.3);
      margin-right: 8px;
      cursor: pointer;
    }

    .ecg-wave {
      height: 40px;
      background: linear-gradient(90deg, #59fba6 0%, #7df9ff 100%);
      border-radius: 20px;
      margin: 10px 0;
      position: relative;
      overflow: hidden;
    }

    .ecg-wave.normal::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
      animation: pulse-normal 2s infinite;
    }

    .ecg-wave.irregular::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent 0%, rgba(255,107,107,0.5) 50%, transparent 100%);
      animation: pulse-irregular 1.5s infinite;
    }

    .ecg-wave.abnormal::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent 0%, rgba(255,179,71,0.4) 50%, transparent 100%);
      animation: pulse-slow 3s infinite;
    }

    @keyframes pulse-normal {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    @keyframes pulse-irregular {
      0% { left: -100%; }
      30% { left: 20%; }
      60% { left: 40%; }
      100% { left: 100%; }
    }

    @keyframes pulse-slow {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    .fall-indicator {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background-color: #59fba6;
      display: inline-block;
      margin-left: 10px;
      animation: blink 2s infinite;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0.3; }
    }

    .stress-meter {
      height: 8px;
      background: linear-gradient(90deg, #59fba6 0%, #ffb347 50%, #ff6b6b 100%);
      border-radius: 4px;
      margin: 10px 0;
      position: relative;
    }

    .stress-indicator {
      position: absolute;
      top: -2px;
      width: 12px;
      height: 12px;
      background: white;
      border-radius: 50%;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      transition: left 0.3s ease;
    }
  </style>
</head>
<body>
  <h1>Live Health Condition Dashboard</h1>

  <div class="grid">
    <!-- Row 1 -->
    <div class="card">
      <div class="metric-title">üíì Heart Rate</div>
      <div id="heartRate" class="metric-value">-- bpm</div>
      <div class="status">Normal</div>
      <div class="footer">Past 24h: Stable</div>
    </div>

    <div class="card">
      <div class="metric-title">ü©∏ Blood Pressure</div>
      <div id="bp" class="metric-value">--/--</div>
      <div class="status">Normal</div>
      <div class="footer">Past 24h: Stable</div>
    </div>

    <div class="card">
      <div class="metric-title">ü´Å Oxygen Saturation</div>
      <div id="spo2" class="metric-value">--%</div>
      <div class="status">Normal</div>
      <div class="footer">Past 24h: +1%</div>
    </div>

    <!-- Row 2 -->
    <div class="card">
      <div class="metric-title">üå°Ô∏è Temperature</div>
      <div id="temperature" class="metric-value">--¬∞C</div>
      <div class="status">Normal</div>
      <div class="footer">Body temperature</div>
    </div>

    <div class="card">
      <div class="metric-title">üìà ECG</div>
      <div id="ecg" class="metric-value">--</div>
      <div class="ecg-wave normal" id="ecgWave"></div>
      <div class="status" id="ecgStatus">Connecting...</div>
      <div class="footer">Real-time monitoring</div>
    </div>

    <div class="card">
      <div class="metric-title">üçØ Glucose</div>
      <div id="glucose" class="metric-value">-- mg/dL</div>
      <div class="status">Normal</div>
      <div class="footer">Blood sugar level</div>
    </div>

    <!-- Row 3 -->
    <div class="card">
      <div class="metric-title">üö® Fall Detection</div>
      <div id="fallStatus" class="metric-value">Active</div>
      <div class="fall-indicator"></div>
      <div class="status">Monitoring</div>
      <div class="footer">Motion sensors active</div>
    </div>

    <div class="card">
      <div class="metric-title">üò∞ Stress Level</div>
      <div id="stress" class="metric-value">Low</div>
      <div class="stress-meter">
        <div class="stress-indicator" id="stressIndicator"></div>
      </div>
      <div class="status">Relaxed</div>
      <div class="footer">HRV analysis</div>
    </div>

    <div class="card">
      <div class="metric-title">üëü Steps</div>
      <div id="steps" class="metric-value">--</div>
      <div class="status">Keep walking</div>
      <div class="footer">Today</div>
    </div>

    <!-- Row 4 -->
    <div class="card">
      <div class="metric-title">üî• Calories Burnt</div>
      <div id="calories" class="metric-value">--</div>
      <div class="status">Normal</div>
      <div class="footer">Past 30d: avg</div>
    </div>

    <div class="card">
      <div class="metric-title">üí§ Sleep</div>
      <div id="sleep" class="metric-value">-- hrs</div>
      <div class="status">Normal</div>
      <div class="footer">Last night</div>
    </div>

    <div class="card health-status">
      <div class="metric-title">üí¨ Health Condition</div>
      <div id="condition" class="metric-value">--</div>
      <div class="status">Updated</div>
      <div class="footer">Every 2 sec</div>
    </div>
  </div>

  <div class="checklist">
    <h2>üìù Daily Checklist</h2>
    <p>Do you feel regular baby kicks?</p>
    <label><input type="checkbox" name="kick" id="kickYes"> Yes</label>
    <label><input type="checkbox" name="kick" id="kickNo"> No</label>
  </div>
   <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
  import { getDatabase, ref, set, onValue, push } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-database.js";
import { get } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-database.js";
  // ‚úÖ Your Firebase configuration (copy this from Firebase Console ‚Üí Project Settings ‚Üí General ‚Üí Web App)
    const firebaseConfig = {
    apiKey: "AIzaSyCdTogMAqnWxQ7cpvToI5QpeRwpn5A6HCQ",
    authDomain: "armstrong-db9dc.firebaseapp.com",
    databaseURL: "https://armstrong-db9dc-default-rtdb.firebaseio.com",
    projectId: "armstrong-db9dc",
    storageBucket: "armstrong-db9dc.firebasestorage.app",
    messagingSenderId: "465166956237",
    appId: "1:465166956237:web:9330b04998080077cf9b84",
    measurementId: "G-LPV0S9D3PP"
  };
  // ‚úÖ Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  window.vitals={"Heart Rate":0,"SpO2":0,"Calories Burnt":0,"BP":0,"Sleep":0,"Steps":0};
  window.readData=function() {
    const dbRef = ref(db, 'smartband/device_001/latest');
    onValue(dbRef, (snapshot) => {
      const data = snapshot.val();
      console.log(data);
      console.log(Object.keys(data).length);
      console.log(data["blood_pressure"]);
      console.log(123);
      vitals["Heart Rate"]=data["heart_rate"];
      vitals["SpO2"] =data["spo2"];
      vitals["Calories Burnt"]=data["calories"];
      vitals["BP"]=data["blood_pressure"];
      vitals["Sleep"]=data["sleep_hours"];
      vitals["Steps"]=data["steps"];
      vitals["Temperature"]=data["temperature"];
      vitals["Stress_Level"]=data["stress"];
      vitals["Glucose"]=data["glucose"];
      vitals["Fall_Detection"]=data["fall_detected"];
      vitals["ECG"]=data["ecg_level"];
    });
  }
 
 
</script>

  <script>
    // Generate realistic mock data
    function generateMockData() {
      return {
        "Heart Rate": 1,
        "SpO2": Math.floor(Math.random() * 5) + 95,
        "Steps": Math.floor(Math.random() * 2000) + 3000,
        "Sleep": (Math.random() * 2 + 7).toFixed(1),
        "Calories Burnt": Math.floor(Math.random() * 500) + 1500,
        "Systolic_BP": Math.floor(Math.random() * 20) + 110,
        "Diastolic_BP": Math.floor(Math.random() * 10) + 70,
        "Temperature": (Math.random() * 2 + 97.5).toFixed(1),
        "ECG": Math.random() > 0.9 ? "Irregular" : "Normal",
        "Glucose": Math.floor(Math.random() * 40) + 80,
        "Fall_Detection": Math.random() > 0.95 ? "Fall Detected!" : "Active",
        "Stress_Level": Math.floor(Math.random() * 10) + 1
      };
    }

    // Mock analysis function
    function analyzeHealthData(vitals) {
      const conditions = ["Excellent", "Good", "Fair", "Monitor", "Consult Doctor"];
      let score = 0;
      
      if (vitals["Heart Rate"] >= 60 && vitals["Heart Rate"] <= 100) score++;
      if (vitals["SpO2"] >= 95) score++;
      //if (vitals["Systolic_BP"] <= 140 && vitals["Diastolic_BP"] <= 90) score++;
      if (vitals["Temperature"] >= 97.0 && vitals["Temperature"] <= 99.5) score++;
      if (vitals["Glucose"] >= 70 && vitals["Glucose"] <= 140) score++;
      
      return {
        condition: conditions[Math.min(score, 4)]
      };
    }

    function updateECGStatus(ecgValue) {
      const ecgWave = document.getElementById("ecgWave");
      const ecgStatus = document.getElementById("ecgStatus");
      
      // Remove all existing classes
      ecgWave.className = "ecg-wave";
      
      // Convert ECG value to lowercase for consistent comparison
      const ecgLower = ecgValue.toLowerCase();
      
      if (ecgLower.includes("normal")) {
        ecgWave.classList.add("normal");
        ecgStatus.textContent = "Normal";
        ecgStatus.className = "status";
      } else if (ecgLower.includes("irregular") || ecgLower.includes("arrhythmia")) {
        ecgWave.classList.add("irregular");
        ecgStatus.textContent = "Irregular";
        ecgStatus.className = "status critical";
      } else if (ecgLower.includes("abnormal") || ecgLower.includes("anomaly")) {
        ecgWave.classList.add("abnormal");
        ecgStatus.textContent = "Abnormal";
        ecgStatus.className = "status warning";
      } else {
        // Default to normal if value is unclear
        ecgWave.classList.add("normal");
        ecgStatus.textContent = "Monitoring";
        ecgStatus.className = "status";
      }
    }

    function updateStatus(elementId, value, normalRange) {
      const statusElement = document.querySelector(`#${elementId}`).parentElement.querySelector('.status');
      if (value >= normalRange.min && value <= normalRange.max) {
        statusElement.textContent = 'Normal';
        statusElement.className = 'status';
      } else if (value < normalRange.critical || value > normalRange.critical) {
        statusElement.textContent = 'Critical';
        statusElement.className = 'status critical';
      } else {
        statusElement.textContent = 'Warning';
        statusElement.className = 'status warning';
      }
    }

    async function fetchAndUpdate() {
      try {
        readData();
        document.getElementById("heartRate").innerText = vitals["Heart Rate"] + " bpm";
        document.getElementById("spo2").innerText = vitals["SpO2"] + "%";
        document.getElementById("steps").innerText = vitals["Steps"];
        document.getElementById("sleep").innerText = vitals["Sleep"] + " hrs";
        document.getElementById("calories").innerText = vitals["Calories Burnt"];
        document.getElementById("bp").innerText = vitals["BP"];
        document.getElementById("temperature").innerText = vitals["Temperature"] + "¬∞C";
        document.getElementById("ecg").innerText = vitals["ECG"];
        document.getElementById("glucose").innerText = vitals["Glucose"] + " mg/dL";
        document.getElementById("fallStatus").innerText = vitals["Fall_Detection"];
        
        // Update stress level
        const stressLevels = ["Very Low", "Low", "Moderate", "High", "Very High"];
        const stressIndex = Math.floor(vitals["Stress_Level"] / 2);
        document.getElementById("stress").innerText = stressLevels[stressIndex];
        
        // Update stress indicator
        const indicator = document.getElementById("stressIndicator");
        const position = (vitals["Stress_Level"] / 10) * 100;
        indicator.style.left = `${Math.min(position, 88)}%`;
        
        // Update ECG status and animation
        updateECGStatus(vitals["ECG"]);
        
        // Update statuses based on values
        updateStatus("heartRate", vitals["Heart Rate"], {min: 60, max: 100, critical: 40});
        updateStatus("spo2", vitals["SpO2"], {min: 95, max: 100, critical: 88});
        updateStatus("temperature", parseFloat(vitals["Temperature"]), {min: 36.1, max: 37.5, critical: 35});
        updateStatus("glucose", vitals["Glucose"], {min: 70, max: 140, critical: 50});
        analyzeHealthData(vitals);
        // Update condition status
        document.getElementById("condition").innerText = "Updated";
        
      } catch (error) {
        console.error("Failed to fetch health data", error);
        document.getElementById("condition").innerText = "‚ö†Ô∏è Error";
      }
    }

    setInterval(fetchAndUpdate, 2000);
    fetchAndUpdate(); // Initial call
  </script>
</body>
</html>